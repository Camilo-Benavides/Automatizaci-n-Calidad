serenity {
    take.screenshots = FOR_FAILURES
    use.unique.browser = false
    test.root = co.edu.udea.certificacion.taller
    console.colors = true
    report {
        accessibility = true
    }
    requirement {
        types = "epic, feature"
    }
}

#headless.mode = true

# Configuración por defecto para DevContainer
# Cambia a "local" para ejecución local con interfaz gráfica
environment = devcontainer

webdriver {
  driver = chrome
  autodownload = true
  capabilities {
    browserName = "chrome"
    acceptInsecureCerts = true
    "goog:chromeOptions" {
      args = ["--start-maximized",
              "--test-type",
              "--no-sandbox",
              "--ignore-certificate-errors",
              "--disable-popup-blocking",
              "--disable-default-apps",
              "--disable-extensions-file-access-check",
              "--incognito",
              "--disable-infobars",
              "--disable-save-password-bubble",
              "--disable-password-manager",
              "--disable-software-rasterizer"]
    }
  }
}

# Configuración para ambientes específicos
environments {
  devcontainer {
    webdriver {
      capabilities {
        "goog:chromeOptions" {
          args = ["--headless=new",
                  "--test-type",
                  "--no-sandbox",
                  "--disable-dev-shm-usage",
                  "--disable-gpu",
                  "--window-size=1920,1080",
                  "--remote-allow-origins=*",
                  "--ignore-certificate-errors",
                  "--disable-popup-blocking",
                  "--disable-default-apps",
                  "--disable-extensions-file-access-check",
                  "--incognito",
                  "--disable-infobars",
                  "--disable-save-password-bubble",
                  "--disable-password-manager",
                  "--disable-software-rasterizer"]
        }
      }
    }
  }
  
  local {
    webdriver {
      capabilities {
        "goog:chromeOptions" {
          args = ["--start-maximized",
                  "--test-type",
                  "--no-sandbox",
                  "--ignore-certificate-errors",
                  "--disable-popup-blocking",
                  "--disable-default-apps",
                  "--disable-extensions-file-access-check",
                  "--incognito",
                  "--disable-infobars",
                  "--disable-save-password-bubble",
                  "--disable-password-manager"]
        }
      }
    }
  }
}

pages {
    swaglabsUrl = "https://www.google.com/"
    saucedemo = "https://www.saucedemo.com/"
}